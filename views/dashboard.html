<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Llantera</title>
    <link rel="stylesheet" href="/css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Dashboard - Llantera</h1>
            <p>GestiÃ³n de Solicitudes de Proveedores</p>
        </header>

        <main>
            <div class="dashboard-controls">
                <div class="actions-group">
                    <button onclick="loadSolicitudes()" class="btn btn-primary">Actualizar</button>
                    <div class="export-buttons">
                        <button onclick="exportarPDF()" class="btn btn-danger btn-sm">ðŸ“„ PDF</button>
                        <button onclick="exportarExcel()" class="btn btn-success btn-sm">ðŸ“Š Excel</button>
                    </div>
                </div>
                <div class="search-container">
                    <input type="text" id="buscadorSolicitudes" placeholder="Buscar por proveedor, descripciÃ³n o email..." class="search-input">
                    <button onclick="limpiarBusqueda()" class="btn btn-secondary btn-sm">Limpiar</button>
                </div>
                <div class="filter-controls">
                    <select id="filtroEstado">
                        <option value="">Todos los estados</option>
                        <option value="pendiente">Pendiente</option>
                        <option value="en_proceso">En Proceso</option>
                        <option value="completado">Completado</option>
                        <option value="rechazado">Rechazado</option>
                    </select>
                    <select id="filtroServicio">
                        <option value="">Todos los servicios</option>
                        <option value="repuestos">Repuestos</option>
                        <option value="herramientas">Herramientas</option>
                        <option value="pintura">Pintura</option>
                        <option value="grua">GrÃºa/Remolque</option>
                    </select>
                </div>
            </div>

            <div id="solicitudesContainer">
                <div class="loading">Cargando solicitudes...</div>
            </div>
        </main>

        <footer>
            <!-- Footer generado automÃ¡ticamente -->
        </footer>
    </div>

    <div id="modalEditarSolicitud" class="modal hidden">
        <div class="modal-content">
            <h3>Editar Solicitud</h3>
            <form id="editarForm">
                <input type="hidden" id="editarId">
                
                <div class="form-group">
                    <label for="editarEstado">Estado</label>
                    <select id="editarEstado" name="estado">
                        <option value="pendiente">Pendiente</option>
                        <option value="en_proceso">En Proceso</option>
                        <option value="completado">Completado</option>
                        <option value="rechazado">Rechazado</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="editarNotas">Notas del Taller</label>
                    <textarea id="editarNotas" name="notas_taller" rows="3"></textarea>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-success">Guardar</button>
                    <button type="button" onclick="cerrarModal()" class="btn btn-secondary">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <script src="/js/utils.js"></script>
    <script src="/js/dashboard.js"></script>
    <script>
        // Inicializar footer unificado
        document.addEventListener('DOMContentLoaded', function() {
            renderFooter({ 
                type: 'full', 
                showNavigation: false,
                customContent: '<p><a href="/">Volver al formulario</a></p>'
            });
        });
    </script>
</body>
</html>